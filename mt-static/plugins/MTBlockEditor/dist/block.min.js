(()=>{var e={9713:e=>{e.exports=function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},8845:(e,t)=>{"use strict";t.Z=window.MTBlockEditor.Block},4144:(e,t)=>{"use strict";t.cN=t.a7=t.fK=t.Vq=t.iw=t.Pb=t.IY=t.ee=void 0;var a=window.MTBlockEditor.Component,i=(a.BlockIframePreview,a.BlockToolbar),n=a.BlockToolbarButton,l=(a.BlockConfigPanel,a.BlockSetup,a.BlockSetupCommon),o=a.BlockLabel,s=(a.EditorMode,a.Dialog),r=a.DialogHeader,c=a.DialogBody,d=a.DialogFooter;t.ee=i,t.IY=n,t.Pb=l,t.iw=o,t.Vq=s,t.fK=r,t.a7=c,t.cN=d},6532:(e,t)=>{"use strict";t._i=void 0;var a=window.MTBlockEditor.Context,i=(a.EditorContext,a.useEditorContext);a.BlocksContext,a.useBlocksContext;t._i=i},648:(e,t)=>{"use strict";t.x=void 0;var a=window.MTBlockEditor.Hook.useCommands;t.x=a},4823:(e,t)=>{"use strict";t.sO=t.eJ=t.ZP=void 0;var a=window.MTBlockEditor.React;t.ZP=a;var i=a.useState,n=(a.useEffect,a.useRef);t.eJ=i,t.sO=n},6717:(e,t)=>{"use strict";t.b=void 0;var a=window.MTBlockEditor.decorator.blockProperty;t.b=a},8546:(e,t)=>{"use strict";var a=window.MTBlockEditor.i18n;t.Z=a},2979:(e,t)=>{"use strict";t.p4=t.eP=void 0;var a=window.MTBlockEditor.icon,i=a.edit,n=a.link;t.eP=i,t.p4=n},4951:(e,t)=>{"use strict";t.hU=void 0;var a=window.MTBlockEditor.util,i=a.nl2br;a.sanitize,a.isIos,a.isTouchDevice,a.focusIfIos;t.hU=i}},t={};function a(i){var n=t[i];if(void 0!==n)return n.exports;var l=t[i]={exports:{}};return e[i](l,l.exports,a),l.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=a(9713),t=a.n(e);const i=jQuery;var n=a.n(i),l=a(4951),o=a(4823),s=a(6717),r=a(4144),c=a(8845),d=a(648),m=a(6532),u=a(2979),g=a(8546);async function h(e){return new Promise((t=>{setTimeout((function a(){const i=e();i?Promise.resolve(i).then(t):setTimeout(a,100)}))}))}function b(e,t){const a={};return Object.keys(t).forEach((t=>{a[t]=e[t]})),a}const y={id:Symbol?Symbol("update block"):"update block",merge:(e,t)=>Object.keys(e.data.last).every((a=>e.data.last[a]===t.data.last[a]))?e:null,undo(e,{setFocusedIds:t}){const a=e.block,i=e.data;i.cur=i.cur||b(a,i.last),Object.assign(a,i.last),t([a.id],{forceUpdate:!0})},redo(e,{setFocusedIds:t}){const a=e.block,i=e.data;Object.assign(a,i.cur),t([a.id],{forceUpdate:!0})}};function p(e,t,a){e.editManager.add({block:t,data:{last:b(t,a)},handlers:y})}async function w({block:e,blogId:t,dummyFieldId:a}){const i=document.querySelector("#mt-dialog-iframe");await h((()=>i.contentWindow?.uploadFiles&&"loading"!==i.contentWindow?.document.readyState&&i.contentWindow?.jQuery&&new Promise((e=>i.contentWindow?.jQuery(e)))));const n=i.contentWindow;if(e.files&&e.files.length>=1){const t=n.document.querySelector("#upload");n.uploadFiles(e.files),t.style.setProperty("display","none","important"),e.files=[]}else if(e.assetId){const i=n.document;i.querySelector('[data-panel-id="#list-asset-panel"]').click();const l=i.querySelector("#search");await h((()=>!l.disabled));const o=i.querySelector("#asset-table tbody");let s=i.querySelector(`#asset-${e.assetId}`);if(!s){n.jQuery(".indicator, #listing-table-overlay").show(),n.jQuery("#asset-table tbody, #actions-bar .page-item").hide();const l=i.createElement("template"),o={__mode:"dialog_list_asset",_type:"asset",edit_field:a,blog_id:t,dialog_view:"1",dialog:"1",json:"1",can_multi:"0",filter:"id",filter_val:e.assetId},r=await fetch(window.CMSScriptURI+"?"+new URLSearchParams(o),{headers:{"X-Requested-With":"XMLHttpRequest"}}).then((e=>e.json())).then((e=>e.html.replace(/^\s*<tbody>|<\/tbody>\s*$/g,""))).catch((()=>""));r&&(l.innerHTML=r,s=l.content),n.jQuery(".indicator, #listing-table-overlay").hide(),n.jQuery("#asset-table tbody, #actions-bar .page-item").show()}s&&(o.prepend(s),i.querySelector(`#asset-${e.assetId} input[name="id"]`).click())}}async function k(){const e=document.querySelector("#mt-dialog-iframe").contentWindow;return new Promise((t=>{e.document.querySelector(".modal-footer button.primary")?.addEventListener("click",(()=>{h((()=>e.document.querySelector("#asset-detail-panel-form"))).then(t)}))}))}const M=(0,s.b)((({focus:e,block:t})=>{const{editor:a}=(0,m._i)(),[,i]=(0,o.eJ)(Object.assign({},t)),[s,c]=(0,o.eJ)(!1),[b,y]=(0,o.eJ)(!1),M=(0,o.sO)(null),T=window.trans("Please select an image");if((0,d.x)({block:t,commands:[{command:"core-insertLink",callback:()=>{y(!0)}}]},[]),!e&&!t.url&&"setup"===a.opts.mode)return o.ZP.createElement("p",null,T);async function v(){c(!0);const e={},l=document.querySelector("[name=blog_id]").value,o=`mt-block-editor-${t.id}-${(new Date).getTime()}`,s=n()("<div/>",{id:o});s.appendTo("body").data("mt-editor",{currentEditor:{insertContent(n){const l=document.createElement("template");l.innerHTML=n;const o=l.content.querySelector("img");Object.assign(e,{assetUrl:o.dataset.url,url:o.src,imageHeight:e.imageWidth?Math.round(parseInt(e.imageWidth)/o.width*o.height)+"":"",alignment:o.className?.replace(/^mt-image-/,""),hasCaption:""!==(e.caption||"")}),!e.linkUrl&&e.linkToOriginal&&(e.linkUrl=e.assetUrl),p(a,t,e),Object.assign(t,e),i(Object.assign({},t)),c(!1),s.remove()}}}),n().fn.mtModal.open(window.ScriptURI+"?"+new URLSearchParams({__mode:"dialog_asset_modal",_type:"asset",edit_field:o,blog_id:l,dialog_view:"1",filter:"class",filter_val:"image"}),{large:!0}),await w({block:t,blogId:l,dummyFieldId:o}),k().then((async a=>{const i=await h((()=>a.querySelector("[data-asset-id]")));e.assetId=i.dataset.assetId;const n=a.ownerDocument,l=n.createElement("style");n.head.appendChild(l),l.sheet?.insertRule('\n[id^="display_asset_prefs-"],\n[id^="link_to_popup-"] .custom-radio,\n.icon-align-left,\n.icon-align-right {\n  display: none !important;\n}\n      ');const o=n.querySelector("[id^=include_prefs-]"),s=n.createElement("template");s.innerHTML=`\n<div class="row">\n<div class="col-md-6">\n\n<div class="form-group">\n  <label class="form-control-label">${window.trans("Alternative Text")}</label>\n  <input type="text" id="alternativeText" class="form-control">\n</div>\n\n<div class="form-group">\n  <label class="form-control-label">${window.trans("Caption")}</label>\n  <textarea id="caption" class="form-control" rows="2"></textarea>\n</div>\n\n<div class="form-group">\n  <label class="form-control-label">${window.trans("Width")}</label>\n  <input type="number" id="imageWidth" class="form-control">\n</div>\n\n</div>\n</div>\n`,o.parentElement?.insertBefore(s.content,o),["alternativeText","caption","imageWidth"].forEach((a=>{const i=n.querySelector(`#${a}`);e[a]=i.value=t[a],i.addEventListener("input",(()=>{e[a]=i.value}))}));const r=n.querySelector('input[id^="create_thumbnail-"]');r.checked=t.useThumbnail,r.addEventListener("change",(()=>{t.useThumbnail=r.checked}));const c=n.querySelector('input[id^="thumb_width-"]');c.parentElement?.classList.add("d-none");const d=n.querySelector("#imageWidth");d.value||(d.value=c.value),d.addEventListener("input",(()=>{c.value=d.value})),d.dispatchEvent(new Event("input"));const m=n.querySelector("input[id^=link_to_popup-]");m.name="",e.linkToOriginal=m.checked=t.linkToOriginal,m.addEventListener("change",(()=>{e.linkToOriginal=m.checked}))}))}t.showModal&&(t.showModal=!1,v());const f=t.url;return o.ZP.createElement("div",{"data-mt-block-editor-keep-focus":s?"1":"0"},o.ZP.createElement(r.Pb,{block:t}),o.ZP.createElement(r.iw,{block:t},f?t.hasCaption?o.ZP.createElement("figure",{style:"none"===t.alignment?{display:"inline-block"}:{}},o.ZP.createElement("img",{src:f,alt:t.alternativeText,width:t.imageWidth,height:t.imageHeight,style:Object.assign({maxWidth:"100%",height:"auto"},"center"===t.alignment?{display:"block",marginLeft:"auto",marginRight:"auto"}:{})}),o.ZP.createElement("figcaption",null,e?o.ZP.createElement("textarea",{className:"mt-be-input","data-property-name":"caption","data-min-rows":"1",style:{width:"100%"}}):(0,l.hU)(t.caption))):o.ZP.createElement("p",null,o.ZP.createElement("img",{src:f,alt:t.alternativeText,width:t.imageWidth,height:t.imageHeight,style:Object.assign({maxWidth:"100%",height:"auto"},"center"===t.alignment?{display:"block",marginLeft:"auto",marginRight:"auto"}:{display:"block"})})):o.ZP.createElement("button",{type:"button",className:"mt-be-btn-default",onClick:v},T)),e&&o.ZP.createElement(o.ZP.Fragment,null,o.ZP.createElement(r.ee,null,o.ZP.createElement(r.IY,{icon:u.eP,label:window.trans("Edit"),onClick:v}),o.ZP.createElement(r.IY,{icon:u.p4,label:window.trans("Insert Link"),onClick:()=>y(!0)})),o.ZP.createElement(r.Vq,{open:b,onClose:()=>y(!1)},o.ZP.createElement(r.fK,null,o.ZP.createElement("h4",{className:"mt-be-dialog-title"},g.Z.t("Insert Link"))),o.ZP.createElement("form",{ref:M},o.ZP.createElement(r.a7,null,o.ZP.createElement("label",{className:"mt-be-label-name"},o.ZP.createElement("div",{className:"mt-be-label-block"},g.Z.t("Link URL")),o.ZP.createElement("input",{type:"url",className:"mt-be-input",name:"linkUrl",defaultValue:t.linkUrl,"data-mt-block-editor-focus-default":!0})),o.ZP.createElement("label",{className:"mt-be-label-name"},o.ZP.createElement("div",{className:"mt-be-label-block"},g.Z.t("Title")),o.ZP.createElement("input",{className:"mt-be-input",name:"linkTitle",defaultValue:t.linkTitle})),o.ZP.createElement("label",{className:"mt-be-label-name"},o.ZP.createElement("div",{className:"mt-be-label-block"},g.Z.t("Target Attribute")),o.ZP.createElement("select",{name:"linkTarget",className:"mt-be-input",defaultValue:t.linkTarget},o.ZP.createElement("option",{value:"_self"},g.Z.t("None")),o.ZP.createElement("option",{value:"_blank"},g.Z.t("New window"))))),o.ZP.createElement(r.cN,null,o.ZP.createElement("button",{type:"button",className:"mt-be-btn-default",onClick:()=>{y(!1)}},g.Z.t("Close")),o.ZP.createElement("button",{type:"button",className:"mt-be-btn-primary",onClick:()=>{const e=M.current;e&&(["linkUrl","linkTitle","linkTarget"].forEach((a=>{t[a]=e[a].value})),y(!1))}},g.Z.t("Save")))))))})),T=({block:e})=>{const t="asset asset-image"+("center"===e.alignment?" mt-image-center":"");let a=e.caption?o.ZP.createElement("img",{src:e.url,alt:e.alternativeText,width:e.imageWidth,height:e.imageHeight,className:t,style:Object.assign({maxWidth:"100%",height:"auto"},"center"===e.alignment?{display:"block",marginLeft:"auto",marginRight:"auto"}:{})}):o.ZP.createElement("img",{src:e.url,alt:e.alternativeText,width:e.imageWidth,height:e.imageHeight,className:t,style:Object.assign({maxWidth:"100%",height:"auto"},"center"===e.alignment?{display:"block",marginLeft:"auto",marginRight:"auto"}:{display:"block"})});return e.linkUrl&&(a=o.ZP.createElement("a",{href:e.linkUrl,target:e.linkTarget,title:e.linkTitle||void 0},a)),e.caption?o.ZP.createElement("figure",{className:"mt-figure"+("center"===e.alignment?" mt-figure-center":""),style:"none"===e.alignment?{display:"inline-block"}:{}},a,o.ZP.createElement("figcaption",null,(0,l.hU)(e.caption))):o.ZP.createElement("p",null,a)};class v extends c.Z{static get label(){return window.trans("MTImage")}constructor(e){super(),t()(this,"assetId",void 0),t()(this,"assetUrl",void 0),t()(this,"url",void 0),t()(this,"imageWidth",void 0),t()(this,"imageHeight",void 0),t()(this,"alternativeText",void 0),t()(this,"caption",void 0),t()(this,"alignment",void 0),t()(this,"showModal",void 0),t()(this,"hasCaption",void 0),t()(this,"useThumbnail",void 0),t()(this,"files",void 0),t()(this,"linkToOriginal",void 0),t()(this,"linkUrl",void 0),t()(this,"linkTarget","_self"),t()(this,"linkTitle",void 0),this.assetId="",this.assetUrl="",this.url="",this.imageWidth="",this.imageHeight="",this.alternativeText="",this.caption="",this.linkToOriginal=!1,this.alignment="",this.useThumbnail=!1,this.showModal=!1,this.linkUrl="",this.linkTitle="",e&&Object.assign(this,e),this.hasCaption=""!==this.caption}metadata(){return this.metadataByOwnKeys({keys:["assetId","alignment","useThumbnail"]})}editor({focus:e}){return o.ZP.createElement(M,{key:this.id,focus:e,block:this})}html(){return o.ZP.createElement(T,{block:this})}static async new({editor:e}){const t=e.opts.block["mt-image"]||{};return new this({showModal:"boolean"!=typeof t.showModalOnNew||t.showModalOnNew})}static async newFromHtml({html:e,meta:t}){const a=(new DOMParser).parseFromString(e,"text/html"),i=a.querySelector("IMG"),n=a.querySelector("FIGCAPTION"),l=a.querySelector("A"),o={url:i?.getAttribute("src")||"",imageWidth:(i?.width||"").toString(),imageHeight:(i?.height||"").toString(),alternativeText:i?.alt||"",caption:n?.innerHTML.replace(/<br[^>]*>/g,"\n")||"",assetUrl:l?.getAttribute("href")||"",linkToOriginal:!(!l||l.getAttribute("target"))};return l&&(l.getAttribute("target")?(o.linkUrl=l.getAttribute("href")||"",o.linkTitle=l.getAttribute("title")||"",o.linkTarget=l.target):o.linkUrl=l.href),new v(Object.assign(o,t))}static canNewFromFile({file:e}){return/^image\//.test(e.type)}static async newFromFile({file:e}){return new v({files:[e],showModal:!0})}}t()(v,"typeId","mt-image"),t()(v,"selectable",!0),t()(v,"icon","data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCA1MTIgNTEyJz48c3R5bGU+LnN0MHtmaWxsOiM2NjZ9PC9zdHlsZT48cGF0aCBjbGFzcz0nc3QwJyBkPSdNNDY0IDQ0OEg0OGMtMjYuNSAwLTQ4LTIxLjUtNDgtNDhWMTEyYzAtMjYuNSAyMS41LTQ4IDQ4LTQ4aDQxNmMyNi41IDAgNDggMjEuNSA0OCA0OHYyODhjMCAyNi41LTIxLjUgNDgtNDggNDh6TTExMiAxMjBjLTMwLjkgMC01NiAyNS4xLTU2IDU2czI1LjEgNTYgNTYgNTYgNTYtMjUuMSA1Ni01Ni0yNS4xLTU2LTU2LTU2ek02NCAzODRoMzg0VjI3MmwtODcuNS04Ny41Yy00LjctNC43LTEyLjMtNC43LTE3IDBMMjA4IDMyMGwtNTUuNS01NS41Yy00LjctNC43LTEyLjMtNC43LTE3IDBMNjQgMzM2djQ4eicvPjwvc3ZnPgo=");const f=v,E=(0,s.b)((({focus:e,block:t})=>{const{editor:a}=(0,m._i)(),[,i]=(0,o.eJ)(Object.assign({},t)),[l,s]=(0,o.eJ)(!1),c=window.trans("Please select an file");async function d(){s(!0);const e={},l=document.querySelector("[name=blog_id]").value,o=`mt-block-editor-${t.id}-${(new Date).getTime()}`;n()("<div/>",{id:o}).appendTo("body").data("mt-editor",{currentEditor:{insertContent(n){const l=document.createElement("template");l.innerHTML=n;const o=l.content.querySelector("a");if(o)Object.assign(e,{assetUrl:o.getAttribute("href"),text:t.text||o.textContent});else{const a=l.content.querySelector("img");Object.assign(e,{assetUrl:a.dataset.url||a.src,text:t.text||a.alt})}p(a,t,e),Object.assign(t,e),i(Object.assign({},t)),s(!1)}}}),n().fn.mtModal.open(window.ScriptURI+"?"+new URLSearchParams({__mode:"dialog_asset_modal",_type:"asset",edit_field:o,blog_id:l,dialog_view:"1"}),{large:!0}),await w({block:t,blogId:l,dummyFieldId:o}),k().then((async t=>{const a=await h((()=>t.querySelector("[data-asset-id]")));e.assetId=a.dataset.assetId;const i=t.ownerDocument,n=i.createElement("style");i.head.appendChild(n),n.sheet?.insertRule("\nbody { display: none }\n      ");const l=t.querySelector("button.primary");await h((()=>{const e=i.defaultView?.jQuery._data(l,"events");return!(!e||!e.click)})),l.click()}))}return t.showModal&&(t.showModal=!1,d()),o.ZP.createElement("div",{"data-mt-block-editor-keep-focus":l?"1":"0"},o.ZP.createElement(r.Pb,{block:t}),o.ZP.createElement(r.iw,{block:t},t.assetUrl?e?o.ZP.createElement("div",null,o.ZP.createElement("label",{className:"mt-be-label-name"},o.ZP.createElement("div",null,window.trans("Link URL")),o.ZP.createElement("a",{className:"mt-be-input--static",href:t.assetUrl,target:"_blank",rel:"noreferrer"},t.assetUrl)),o.ZP.createElement("label",{className:"mt-be-label-name"},o.ZP.createElement("div",null,window.trans("Text to display")),o.ZP.createElement("input",{"data-property-name":"text",style:{width:"100%"}}))):o.ZP.createElement("a",{href:"javascript: void(0)"},t.text):o.ZP.createElement("button",{type:"button",className:"mt-be-btn-default",onClick:d},c)),e&&o.ZP.createElement(r.ee,null,o.ZP.createElement(r.IY,{icon:u.eP,label:window.trans("Edit"),onClick:d})))})),N=({block:e})=>o.ZP.createElement("div",null,o.ZP.createElement("a",{href:e.assetUrl},e.text));class P extends c.Z{static get label(){return window.trans("MTFile")}constructor(e){super(),t()(this,"assetId",void 0),t()(this,"assetUrl",void 0),t()(this,"text",void 0),t()(this,"showModal",void 0),t()(this,"files",void 0),this.assetId="",this.assetUrl="",this.text="",this.showModal=!1,e&&Object.assign(this,e)}metadata(){return this.metadataByOwnKeys({keys:["assetId"]})}editor({focus:e}){return o.ZP.createElement(E,{key:this.id,focus:e,block:this})}html(){return o.ZP.createElement(N,{block:this})}static async new({editor:e}){const t=e.opts.block["mt-file"]||{};return new this({showModal:"boolean"!=typeof t.showModalOnNew||t.showModalOnNew})}static async newFromHtml({html:e,meta:t}){const a=(new DOMParser).parseFromString(e,"text/html").querySelector("A");return new P(Object.assign({assetUrl:a?.getAttribute("href")||"",text:a?.textContent||""},t))}static canNewFromFile({file:e}){return!/^image\//.test(e.type||"")}static async newFromFile({file:e}){return new P({files:[e],showModal:!0})}}t()(P,"typeId","mt-file"),t()(P,"selectable",!0),t()(P,"icon","data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAzODQgNTEyJz48c3R5bGU+LnN0MHtmaWxsOiM2NjZ9PC9zdHlsZT48cGF0aCBjbGFzcz0nc3QwJyBkPSdNMjg4IDI0OHYyOGMwIDYuNi01LjQgMTItMTIgMTJIMTA4Yy02LjYgMC0xMi01LjQtMTItMTJ2LTI4YzAtNi42IDUuNC0xMiAxMi0xMmgxNjhjNi42IDAgMTIgNS40IDEyIDEyem0tMTIgNzJIMTA4Yy02LjYgMC0xMiA1LjQtMTIgMTJ2MjhjMCA2LjYgNS40IDEyIDEyIDEyaDE2OGM2LjYgMCAxMi01LjQgMTItMTJ2LTI4YzAtNi42LTUuNC0xMi0xMi0xMnptMTA4LTE4OC4xVjQ2NGMwIDI2LjUtMjEuNSA0OC00OCA0OEg0OGMtMjYuNSAwLTQ4LTIxLjUtNDgtNDhWNDhDMCAyMS41IDIxLjUgMCA0OCAwaDIwNC4xQzI2NC44IDAgMjc3IDUuMSAyODYgMTQuMUwzNjkuOSA5OGM5IDguOSAxNC4xIDIxLjIgMTQuMSAzMy45em0tMTI4LTgwVjEyOGg3Ni4xTDI1NiA1MS45ek0zMzYgNDY0VjE3NkgyMzJjLTEzLjMgMC0yNC0xMC43LTI0LTI0VjQ4SDQ4djQxNmgyODh6Jy8+PC9zdmc+Cg==");const I=P;window.MTBlockEditor.registerBlockType(f),window.MTBlockEditor.registerBlockType(I)})()})();